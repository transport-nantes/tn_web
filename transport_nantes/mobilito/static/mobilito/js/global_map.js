/*
# DOCUMENTATION
LeafletJS
https://leafletjs.com/examples/quick-start/

Leaflet.markercluster
https://github.com/Leaflet/Leaflet.markercluster
*/

// Initializing the map
var map = L.map("map").setView([47.218371, -1.553621], 8);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  maxZoom: 19,
  attribution:
    'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
}).addTo(map);

// locations is generated by django in the template
var locations = JSON.parse(document.getElementById("locations").textContent);
var markers = L.markerClusterGroup();
for (var i = 0; i < locations.length; i++) {
  var a = locations[i];
  var title = a.location;
  // The title attribute is the string that will be displayed in the popup
  // The popup is displayed when the user clicks on the marker
  var marker = L.marker(new L.LatLng(a.latitude, a.longitude), { title: title });
  marker.bindPopup(title);
  markers.addLayer(marker);
}

map.addLayer(markers);
