{% extends 'topicblog/content.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static 'topicblog/email-sending-confirm.js' %}"></script>
{% endblock scripts %}

{% block content %}

    <div class="col-10 mx-auto mt-2">
        <p>
            Envoi du slug :
            <a href="{% url base_model.viewbyslug_object_url tbe_slug %}" target="_blank">
                {{ tbe_slug }}
            </a>
            <span class="text-muted small"><i class="fa-solid fa-up-right-from-square"></i></span>
        </p>
    </div>
    
    <form id="send-email-form" class="col-10 mx-auto mt-2"
    action="{% url send_to_view tbe_slug %}"
    method="POST">{% csrf_token %}
        {{form|crispy}}
        <p class="text-muted small">Nombre de destinataires : <span id="nb-recipients">0</span></p>
        <button id="send-email-btn" type="submit" class="btn navigation-button">Envoyer</button>
    </form>

    <div class="col-10 mx-auto mt-5">
        <p> Pr√©visualisation: </p>
        {% include 'topicblog/template_tags/item_teaser.html' with item=sent_object %}
    </div>

{% endblock content %}
